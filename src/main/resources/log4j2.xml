<?xml version="1.0" encoding="utf-8"?>  
<configuration status="INFO" monitorInterval="30">  
    <properties>  
        <!-- 文件输出格式 -->  
        <!-- <property name="log_pattern">%d{yyyy-MM-dd HH:mm:ss.SSS} |-%-5level [%thread] %c.%M() [%L] -| %m%n</property> -->
        <property name="log_pattern">%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [${sys:app.name},%X{X-B3-TraceId},%X{X-B3-SpanId},%X{X-Span-Export}] %X{request_url} [%thread] %c : %m%n</property>
        <!-- ${web:rootDir}是项目根目录 -->
        <property name="log_root">E:/log</property><!-- -Dlog.root.path=../logs/ --> 
        <property name="app_name">xyqb</property><!-- -Dapp.name=marvels-common -->
    </properties>  
  
    <appenders>  
    	<!-- 输出到控制台 -->
        <Console name="console" target="SYSTEM_OUT">  
        	<!-- 过滤，输出info级别及以上的日志 -->
        	<ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY" />
            <PatternLayout pattern="${log_pattern}" />  
        </Console>  
        
        <!-- 输出INFO级别日志 -->
        <RollingFile name="rollingInfoFile" fileName="${log_root}${app_name}-info.log"
                     filePattern="${log_root}$${date:yyyy-MM-dd}/${app_name}-info.%d{yyyy-MM-dd}.log.zip">
            <Filters>
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL" />
                <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="${log_pattern}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <!-- <SizeBasedTriggeringPolicy size="2KB"/> -->
            </Policies>
        </RollingFile>
        
        <!-- 输出WARN级别日志 -->
        <RollingFile name="rollingWarnFile" fileName="${log_root}${app_name}-warn.log"
                     filePattern="${log_root}$${date:yyyy-MM-dd}/${app_name}-warn.%d{yyyy-MM-dd}.log.zip">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="DENY" onMismatch="NEUTRAL" />
                <ThresholdFilter level="WARN" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="${log_pattern}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <!-- <SizeBasedTriggeringPolicy size="2KB"/> -->
            </Policies>
        </RollingFile>
        
        <!-- 输出ERROR级别日志 -->
        <RollingFile name="rollingErrorFile" fileName="${log_root}${app_name}-error.log"
                     filePattern="${log_root}$${date:yyyy-MM-dd}/${app_name}-error.%d{yyyy-MM-dd}.log.zip">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="${log_pattern}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <!-- <SizeBasedTriggeringPolicy size="2KB"/> -->
            </Policies>
        </RollingFile>
    </appenders>  
      
    <loggers>  
        <logger name="org.springframework" level="INFO" additivity="TRUE"></logger>
        <logger name="org.mybatis" level="INFO"></logger>  
        <logger name="com.alibaba.druid" level="WARN"></logger>
        <root level="info">  
            <appender-ref ref="console" />
            <appender-ref ref="rollingInfoFile" />
            <appender-ref ref="rollingWarnFile" />
            <appender-ref ref="rollingErrorFile" />  
        </root>  
    </loggers>  
  
</configuration>  